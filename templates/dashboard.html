{% extends 'base.html' %}

{% block content %}

<div class="container-fluid mt-4">

    <!-- Welcome Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow-sm border-0 rounded-4 bg-gradient text-white"
                 style="background: linear-gradient(135deg, #4e73df, #1cc88a);">
                <div class="card-body p-4">
                    <h2 class="fw-bold">Welcome, {{ current_user.username }} ðŸ‘‹</h2>
                    <p class="mb-0">Manage students, track records, and analyze data efficiently.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Stats Section -->
    <div class="row g-4">

        <!-- Total Students -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0 rounded-4 text-center">
                <div class="card-body p-4">
                    <h5 class="text-muted">Total Students</h5>
                    <h2 class="fw-bold text-primary">{{ total_students }}</h2>
                </div>
            </div>
        </div>

        <!-- Average Marks -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0 rounded-4 text-center">
                <div class="card-body p-4">
                    <h5 class="text-muted">Average Marks</h5>
                    <h2 class="fw-bold text-success">
                        {% if avg_marks %}
                            {{ avg_marks|round(2) }}
                        {% else %}
                            0
                        {% endif %}
                    </h2>
                </div>
            </div>
        </div>

        <!-- Top Performer -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0 rounded-4 text-center">
                <div class="card-body p-4">
                    <h5 class="text-muted">Top Performer</h5>
                    <h6 class="fw-bold text-danger">
                        {% if top_student %}
                            {{ top_student.name }} ({{ top_student.marks }})
                        {% else %}
                            No Data
                        {% endif %}
                    </h6>
                </div>
            </div>
        </div>

    </div>

    <!-- Quick Actions -->
    <div class="row mt-5">
        <div class="col-md-6 mb-3">
            <a href="{{ url_for('students') }}" 
               class="btn btn-primary w-100 py-3 rounded-4 shadow-sm">
                ðŸ“‹ View All Students
            </a>
        </div>

        <div class="col-md-6 mb-3">
            <a href="{{ url_for('add_student') }}" 
               class="btn btn-success w-100 py-3 rounded-4 shadow-sm">
                âž• Add New Student
            </a>
        </div>
    </div>

</div>

{% endblock %}